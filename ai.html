<!-- ==========================================================
Owned by Pieter Tschopp  
Endo-Prism AI Organization

All rights belong to their respective owners.  
Endo Prism AI is an independent creation and is not affiliated with, endorsed by, 
or sponsored by any companies, platforms, or trademark holders (yet).

‚ÄúEndo Prism AI,‚Äù including its design elements, logic systems, codebase, and branding, 
is the intellectual property of its creators.  
Unauthorized copying, modification, redistribution, or commercial use is strictly prohibited.


Contributors / Team:
- Pieter Tschopp
- Preston Finlay
- Abigal Finlay
============================================================== -->


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/Favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Endo Prism AI</title>
    <style>
        :root {
            --bg: #f3f4f6;
            --header: #0b1320;
            --user: #0078d7;
            --ai: #e0e0e0;
            --text: #111;
            --footer: #fff;
        }

        body.dark {
            --bg: #111827;
            --header: #1f2937;
            --user: #2563eb;
            --ai: #374151;
            --text: #f9fafb;
            --footer: #1f2937;
        }

        body {
            font-family: system-ui, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: var(--bg);
            color: var(--text);
            transition: background 0.3s, color 0.3s;
        }

        header {
            background: var(--header);
            color: #fff;
            text-align: center;
            padding: 1rem 2rem;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            font-size: 1.5rem;
            font-weight: bold;
        }

        #toggleDark {
            position: absolute;
            top: 50%;
            right: 1.5rem;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 1.2rem;
            transition: transform 0.2s;
        }

        #toggleDark:hover {
            transform: translateY(-50%) scale(1.2);
        }

        #chat {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 2rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .message {
            padding: 12px 16px;
            border-radius: 16px;
            max-width: 70%;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
            opacity: 0;
            animation: fadeIn 0.25s forwards;
            position: relative;
        }

        .user {
            background: var(--user);
            color: #fff;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .ai {
            background: var(--ai);
            color: var(--text);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        footer {
            display: flex;
            align-items: center;
            padding: 10px 1.5rem;
            background: var(--footer);
            border-top: 1px solid #ccc;
            gap: 10px;
        }

        body.dark footer {
            border-color: #374151;
        }

        input {
            flex: 1;
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid #ccc;
            font-size: 1rem;
            background: var(--bg);
            color: var(--text);
            transition: border-color 0.2s, background 0.2s, color 0.2s;
        }

        input:focus {
            border-color: var(--user);
            outline: none;
        }

        button {
            padding: 12px 20px;
            border: none;
            background: var(--user);
            color: #fff;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }

        button:hover {
            background: #005fa3;
        }

        pre {
            background: #f0f0f0;
            color: #111;
            padding: 12px 16px;
            border-radius: 12px;
            overflow-x: auto;
            font-family: monospace;
            white-space: pre-wrap;
            border: 1px solid #ccc;
            position: relative;
            min-height: 20px;
        }

        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0, 0, 0, 0.15);
            border: none;
            color: #fff;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.8rem;
            transition: background 0.2s;
        }

        .copy-btn:hover {
            background: rgba(0, 0, 0, 0.3);
        }
    </style>
</head>

<body>
    <header>
        Endo Prism AI üåê
        <button id="toggleDark" title="Toggle dark mode">üåô</button>
    </header>

    <div id="chat"></div>

    <footer>
        <input id="userInput" type="text" placeholder="Ask me to make a website or anything..." />
        <button id="sendBtn">Send</button>
    </footer>

 <script>
/* ==========================================================
   Endo Prism AI ‚Äî ULTRA INTE`LLIGENT EDITION                |
   Web Search + Intent Engine + Real Answers                |
   ========================================================== */

const chat = document.getElementById('chat');
const input = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const toggleDark = document.getElementById('toggleDark');

/* DARK MODE */
toggleDark.addEventListener('click', () => document.body.classList.toggle('dark'));

/* MEMORY SYSTEM */
let memory = {
    topics: [],
    lastTopic: "",
    recentMessages: []
};

/* OPTIONAL LOCAL KNOWLEDGE FILE */
let localKnowledge = {};
(async () => {
    try {
        const data = await fetch("info.json");
        localKnowledge = await data.json();
    } catch {}
})();

/* ==========================================================
   UI HELPERS
   ========================================================== */
function appendMessage(text, sender = "ai") {
    const msg = document.createElement("div");
    msg.className = `message ${sender}`;
    msg.textContent = text;
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
}

function showCodeBlock(html) {
    const wrap = document.createElement("div");
    wrap.style.position = "relative";
    wrap.style.margin = "10px 0";

    const pre = document.createElement("pre");
    pre.textContent = html;
    wrap.appendChild(pre);

    const btn = document.createElement("button");
    btn.textContent = "Copy";
    btn.className = "copy-btn";
    btn.onclick = () => {
        navigator.clipboard.writeText(html);
        btn.textContent = "Copied!";
        setTimeout(() => btn.textContent = "Copy", 1500);
    };

    wrap.appendChild(btn);
    chat.appendChild(wrap);
    chat.scrollTop = chat.scrollHeight;
}

/* ==========================================================
   NO-API WEB SEARCH ENGINE
   ========================================================== */

async function fetchWebData(topic) {
    appendMessage(`üîé Searching the web for ‚Äú${topic}‚Äù...`);

    const q = encodeURIComponent(topic);

  try {
    const url = `https://www.google.com/search?q=${encodeURIComponent(q)}`;
    const res = await fetch(url, {
        headers: {
            // Helps Google return a real page instead of blocking
            "User-Agent": "Mozilla/5.0"
        }
    });

    const html = await res.text();
    const doc = new DOMParser().parseFromString(html, "text/html");

 
} catch (err) {
    console.error("Error fetching Google:", err);
}

    /* 2) Wikipedia Summary */
    try {
        const wiki = await fetch(
            `https://en.wikipedia.org/api/rest_v1/page/summary/${q}`
        );
        const data = await wiki.json();
        if (data.extract) {
            return `üìò Wikipedia:
${data.extract}`;
        }
    } catch {}

    /* 3) Bing HTML SCRAPE (NO KEY) */
    try {
        const bing = await fetch(`https://www.bing.com/search?q=${q}`);
        const html = await bing.text();
        const doc = new DOMParser().parseFromString(html, "text/html");

        const p = doc.querySelector(".b_algo p");
        if (p) {
            return `üîç Bing Search:
${p.textContent.trim()}`;
        }
    } catch {}

    return "‚ùå No information found online.";
}

/* ==========================================================
   WEBSITE GENERATOR
   ========================================================== */
function generateWebsite(topic, info) {
return `<!DOCTYPE html>
<html>
<head>
<title>${topic} Website</title>
<meta charset="UTF-8">
<style>
body { font-family: sans-serif; margin: 20px; }
h1 { color: #0078d7; }
p { max-width: 700px; line-height: 1.6; white-space: pre-wrap; }
</style>
</head>
<body>
<h1>${topic}</h1>
<p>${info}</p>
<\/body>
<\/html>`;
}

/* ==========================================================
   SUPER AI INTENT ENGINE
   ========================================================== */

function detectIntent(text) {
    text = text.toLowerCase();

    if (/^hi$|^hey$|^hello$/.test(text)) return "greeting";
    if (/how are you/.test(text)) return "status";
    if (/bye|goodbye/.test(text)) return "bye";

    if (/^search /.test(text)) return "searchExplicit";

    if (/make.*website/.test(text)) return "buildWebsite";

    if (text.startsWith("what is") || text.startsWith("who is"))
        return "defineThing";

    if (/tell me about/.test(text))
        return "defineThing";

    return "conversation";
}

/* ==========================================================
   AI RESPONSE BRAIN
   ========================================================== */

async function handleAI(text) {
    const intent = detectIntent(text);
    memory.recentMessages.push(text);

    switch (intent) {

        case "greeting":
            return "Hey! üëã What do you want to know or build?";

        case "status":
            return "I'm running perfectly üòé How can I help?";

        case "bye":
            return "Goodbye! üëã";

        case "searchExplicit": {
            const query = text.replace(/^search /i, "").trim();
            const info = await fetchWebData(query);
            return info;
        }

        case "defineThing": {
            const thing = text.replace(/what is|who is|tell me about/i, "").trim();
            memory.lastTopic = thing;
            const info = await fetchWebData(thing);
            return info;
        }

        case "buildWebsite": {
            const topic = text.replace(/make.*website about/i, "").trim();
            const info = await fetchWebData(topic);
            const html = generateWebsite(topic, info);
            appendMessage("‚úÖ Website generated!");
            showCodeBlock(html);
            return "";
        }

        default:
            memory.topics.push(text);
            return `Interesting! Want me to search the web or build a website about ${text}?`;
    }
}

/* ==========================================================
   INPUT PROCESSOR
   ========================================================== */

async function processInput(raw) {
    const text = raw.trim();
    if (!text) return;

    appendMessage(text, "user");
    input.value = "";

    const response = await handleAI(text);

    if (response && response.trim() !== "")
        appendMessage(response);
}

/* EVENT LISTENERS */
sendBtn.onclick = () => processInput(input.value);
input.addEventListener("keydown", e => {
    if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        processInput(input.value);
    }
});

/* FIRST MESSAGE */
appendMessage("üëã Hello! I'm Endo Prism AI. I can search the web, answer questions, and build websites!");

</script>




</body>
</html>
